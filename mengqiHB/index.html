<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”Ÿæ—¥å¿«ä¹ Mengqi! ğŸ‰</title>
    <!-- genAI_main_start -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ‰</text></svg>">
    <link rel="stylesheet" href="poker-card.css">
    <link rel="stylesheet" href="mahjong-tile.css">
    <link rel="stylesheet" href="uno-card.css">
    <!-- genAI_main_end -->
    <style>
        /* genAI_main_start */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            overflow-y: auto;
            background: linear-gradient(135deg, #ade1ff 0%, #febcff 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 40px 20px;
        }

        .container {
            text-align: center;
            z-index: 10;
            position: relative;
        }

        h1 {
            font-size: 4rem;
            color: #fff;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
            margin-bottom: 20px;
            animation: glow 2s ease-in-out infinite;
        }

        @keyframes glow {
            0%, 100% {
                text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
            }
            50% {
                text-shadow: 0 0 40px rgba(255, 255, 255, 0.8);
            }
        }

        .subtitle {
            font-size: 1.5rem;
            color: #fff;
            margin-bottom: 30px;
            opacity: 0;
            animation: fadeIn 1s ease-in 0.5s forwards;
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
            }
        }


        .content {
            background: rgba(255, 255, 255, 0.9);
            padding: 40px;
            border-radius: 20px;
            max-width: 800px;
            margin: 0 auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            opacity: 0;
            animation: slideUp 1s ease-out 1s forwards;
        }

        /* genAI_main_start */
        @media (max-width: 768px) {
            .content {
                padding: 12px;
            }
        }
        /* genAI_main_end */

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .blessing-section {
            margin: 30px 0;
            padding: 20px;
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.5);
            /* genAI_main_start */
            transition: transform 0.3s, box-shadow 0.3s, border 0.3s;
            cursor: pointer;
            border: 3px solid transparent;
            /* genAI_main_end */
        }

        /* genAI_main_start */

        .blessing-section:active {
            transform: translateY(-2px) scale(0.98);
        }

        .click-hint {
            display: inline-block;
            font-size: 0.9rem;
            color: #666;
            margin-top: 10px;
            padding: 5px 15px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 20px;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 0.6;
                transform: scale(1);
            }
            50% {
                opacity: 1;
                transform: scale(1.05);
            }
        }
        /* genAI_main_end */

        /* genAI_main_start */
        .card-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 20px 0;
            min-height: 160px;
        }

        .blessing-section {
            position: relative;
            overflow: hidden;
        }

        .floating-card {
            position: absolute;
            pointer-events: none;
            z-index: 100;
            animation: fallDown 1s ease-in forwards;
        }

        @keyframes fallDown {
            0% {
                opacity: 1;
                transform: translateY(0) rotate(0deg);
            }
            50% {
                opacity: 1;
            }
            100% {
                opacity: 0;
                transform: translateY(300px) rotate(20deg);
            }
        }

        /* å…¨å±ç‰Œé›¨å®¹å™¨ */
        .card-rain-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            z-index: 9999;
            overflow: hidden;
            opacity: 0.5;
        }

        /* ç‰Œé›¨åŠ¨ç”» */
        .rain-card {
            position: absolute;
            pointer-events: none;
            animation: rainFall linear forwards;
        }

        @keyframes rainFall {
            0% {
                opacity: 0;
                transform: translateY(-100px) rotate(-30deg);
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                opacity: 0;
                transform: translateY(100vh) rotate(30deg);
            }
        }
        /* genAI_main_end */

        .blessing-section h2 {
            color: #333;
            font-size: 1.8rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .blessing-section p {
            color: #555;
            font-size: 1.2rem;
            line-height: 1.8;
            margin: 10px 0;
        }

        .poker-section {
            background: linear-gradient(135deg, rgba(231, 76, 60, 0.1), rgba(44, 62, 80, 0.1));
        }

        .mahjong-section {
            background: linear-gradient(135deg, rgba(46, 204, 113, 0.1), rgba(139, 115, 85, 0.1));
        }

        .uno-section {
            background: linear-gradient(135deg, rgba(241, 196, 15, 0.1), rgba(52, 152, 219, 0.1));
        }

        .ending {
            margin-top: 30px;
            padding: 20px;
            color: #333;
            font-size: 1.3rem;
            font-weight: bold;
        }


        @keyframes bounce {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-20px);
            }
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2.5rem;
            }

            .subtitle {
                font-size: 1.2rem;
            }

            .blessing-section h2 {
                font-size: 1.4rem;
            }

            .blessing-section p {
                font-size: 0.9rem;
            }

            .ending {
                font-size: 0.9rem;
            }
        }
        /* genAI_main_end */
    </style>
</head>
<body>
    <!-- genAI_main_start -->
    <!-- å…¨å±ç‰Œé›¨å®¹å™¨ -->
    <div class="card-rain-container" id="card-rain-container"></div>

    <div class="container">
        <h1>ğŸ‰ ç”Ÿæ—¥å¿«ä¹ Mengqi! ğŸ‰</h1>
        
        <div class="content">
            <!-- æ‰‘å…‹ç¥ç¦ -->
            <!-- genAI_main_start -->
            <div class="blessing-section poker-section" onclick="changePokerCard()" onmousemove="handlePokerMouseMove(event, this)" ontouchmove="handlePokerTouchMove(event, this)">
                <h2>â™ ï¸â™¥ï¸ æ‰‘å…‹ç¥ç¦ â™¦ï¸â™£ï¸</h2>
                <div class="card-container" id="poker-card-container"></div>
                <p>æ„¿ä½ çš„äººç”Ÿå¦‚ä¸€å‰¯ç²¾å·§çš„æ‰‘å…‹ç‰Œï¼Œäºæ–¹å¯¸é—´é“ºå±•ä¸‡åƒæ°”è±¡ã€‚</p>
                <p>çº¢æ¡ƒä¼¼ç«ï¼Œç‡ƒå°½å²æœˆæ·±æƒ…ï¼Œæ˜¯å¿ƒå°–ä¸Šè·³åŠ¨çš„èµ¤è¯šï¼›</p>
                <p>é»‘æ¡ƒå¦‚å¢¨ï¼Œæ²‰æ·€æ™ºæ…§é”‹èŠ’ï¼Œæ˜¯æš—å¤œä¸­ä¸ç­çš„ç¯å¡”ï¼›</p>
                <p>æ–¹å—è‹¥é‡‘ï¼Œé“¸å°±æˆåŠŸé˜¶æ¢¯ï¼Œæ˜¯å¾é€”ä¸Šåšå®çš„å›å“ï¼›</p>
                <p>æ¢…èŠ±å¦‚é›ªï¼Œåœ¨é€†å¢ƒä¸­ç»½æ”¾ï¼Œæ˜¯å‘½è¿é‡Œä¸æœŸçš„é¦ˆèµ ã€‚</p>
                <p>æ¯ä¸€å¼ ç‰Œçš†æ˜¯å‘½è¿çš„ç‹¬ç¬”ï¼Œæ°ä¼¼ä½ ç”Ÿå‘½ä¸­ä¸å¯å¤åˆ¶çš„åç« ã€‚</p>
                <div class="click-hint">ğŸ‘† ç‚¹å‡»åˆ‡æ¢ç‰Œé¢ ğŸ”„</div>
            </div>
            <!-- genAI_main_end -->

            <!-- éº»å°†ç¥ç¦ -->
            <!-- genAI_main_start -->
            <div class="blessing-section mahjong-section" onclick="changeMahjongTile()" onmousemove="handleMahjongMouseMove(event, this)" ontouchmove="handleMahjongTouchMove(event, this)">
                <h2>ğŸ€„ éº»å°†ç¥ç¦ ğŸ€†</h2>
                <div class="card-container" id="mahjong-card-container"></div>
                <p>æ„¿ä½ çš„ç”Ÿæ´»å¦‚ä¸€å±€ç²¾å¦™çš„éº»å°†ï¼Œåœ¨ç‰Œæ¡Œä¸Šæµè½¬å‡ºç”Ÿå‘½çš„éŸµå¾‹ä¸æ¬¢æ„‰ã€‚</p>
                <p>ä¸œå—è¥¿åŒ—ï¼Œé£èµ·äº‘æ¶Œé—´é¡ºé‚å¤©æ—¶ï¼›</p>
                <p>ä¸­å‘ç™½ï¼Œä¸‰å…ƒåŠç¬¬æ—¶æ–‡å…‰å°„æ–—ã€‚</p>
                <p>ç­’ç­’ç›¸ç”Ÿï¼Œä¼¼ç¹æ˜Ÿç¼€æ»¡é•¿ç©ºï¼Œç²¾å½©æ°¸ä¸è½å¹•ï¼›</p>
                <p>æ¡æ¡å¤§è·¯ï¼Œå¦‚æ±Ÿæ²³å¥”æ¶Œå‘å‰ï¼Œç»ˆæ±‡é€šè¾¾ä¹‹å¢ƒã€‚</p>
                <p>èƒ¡ç‰Œå£°å£°ï¼Œæ˜¯å‘½è¿è½»å©çš„å›å“ï¼Œå¥½è¿å¦‚æ½®æ°´èˆ¬è¿ç»µä¸ç»ï¼›</p>
                <p>äººç”Ÿèµ¢å®¶ï¼Œéç‹¬ç‰Œå±€ä¹‹èƒœï¼Œæ›´æ˜¯å²æœˆé‡Œä»å®¹çš„æ³¨è„šã€‚</p>
                <div class="click-hint">ğŸ‘† ç‚¹å‡»åˆ‡æ¢ç‰Œé¢ ğŸ”„</div>
            </div>
            <!-- genAI_main_end -->

            <!-- UNOç¥ç¦ -->
            <!-- genAI_main_start -->
            <div class="blessing-section uno-section" onclick="changeUnoCard()" onmousemove="handleUnoMouseMove(event, this)" ontouchmove="handleUnoTouchMove(event, this)">
                <h2>ğŸ´ UNOç¥ç¦ ğŸ´</h2>
                <div class="card-container" id="uno-card-container"></div>
                <p>æ„¿ä½ çš„æœªæ¥è‹¥UNOä¹‹èˆï¼Œåœ¨è‰²å½©çš„äº¤å“ä¸­è°±å†™ç”Ÿå‘½çš„è¯—ç¯‡ã€‚</p>
                <p>èµ¤è¯šå¦‚çº¢ï¼Œç‚¹ç‡ƒå¿ƒåº•çš„ç‚½çƒ­ï¼Œç»˜å°±æ— ç•çš„æ¿€æƒ…ï¼›</p>
                <p>æ¹›è“ä¼¼å¤©ï¼Œé“ºå±•æ¢¦æƒ³çš„è¾½é˜”ï¼Œä¹¦å†™è¿œèˆªçš„å¿—å‘ï¼›</p>
                <p>ç¿ è‰²è‹¥æ—ï¼Œæ‰¿è½½å¸Œæœ›çš„èŒèŠ½ï¼Œå­•è‚²æ–°ç”Ÿçš„åŠ›é‡ï¼›</p>
                <p>æ˜é»„å¦‚é˜³ï¼Œæ¼¾å¼€æ¬¢æ„‰çš„æ¶Ÿæ¼ªï¼Œç‚¹äº®æ¯ä¸€å¯¸æ—¶å…‰ã€‚</p>
                <p>åè½¬å¡è½»æ—‹ï¼Œå°†çƒ¦å¿§åŒ–ä½œå€’æµçš„æ˜Ÿæ²³ï¼Œé‡å½’å¯‚é™ï¼›</p>
                <p>è·³è¿‡å¡è·ƒåŠ¨ï¼ŒåŠ©ä½ è·¨è¶Šé™©é˜»çš„å±±å³¦ï¼ŒæŠµè¾¾å¦é€”ã€‚</p>
                <p>å˜è‰²å¡éšå¿ƒæµè½¬ï¼Œå¦‚å››å­£æ›´è¿­èˆ¬è‡ªå¦‚ï¼Œ</p>
                <p>åœ¨æ–¹å¯¸ç‰Œæ¡Œé—´ï¼Œé“ºå±•ç”Ÿå‘½çš„åå½©ä¹ç« â€”â€”</p>
                <div class="click-hint">ğŸ‘† ç‚¹å‡»åˆ‡æ¢ç‰Œé¢ ğŸ”„</div>
            </div>
            <!-- genAI_main_end -->

            <!-- ç»“å°¾ -->
            <div class="ending">
                <p>äº²çˆ±çš„å¦¹å¦¹ Mengqiï¼Œ</p>
                <p>æ„¿ä½ çš„æ¯ä¸€æ—¥çš†å¦‚æ¸¸æˆèˆ¬ç»šçƒ‚å¤šå½©ï¼Œ</p>
                <p>åœ¨æ—¶å…‰çš„å…³å¡é‡Œï¼Œæ­¥æ­¥ç”ŸèŠ±ï¼Œç¬‘é¥å¦‚èŠ±ã€‚</p>
                <p>ç”Ÿæ—¥å¿«ä¹ï¼Œæ„¿ä½ çš„å¿ƒç”°æ°¸è¿œç››å¼€ç€æ¬¢æ„‰çš„èŠ±æµ·ï¼Œ</p>
                <p>å²å²å¹´å¹´ï¼Œçš†æ˜¯äººé—´å¥½æ—¶èŠ‚ã€‚ğŸŠğŸˆ</p>
            </div>
        </div>
    </div>

    <!-- genAI_main_start -->
    <script src="poker-card.js"></script>
    <script src="mahjong-tile.js"></script>
    <script src="uno-card.js"></script>
    <script>
        // èŠ‚æµæ§åˆ¶å˜é‡
        let lastPokerTime = 0;
        let lastMahjongTime = 0;
        let lastUnoTime = 0;
        const throttleDelay = 100;

        // åˆå§‹åŒ–æ‰‘å…‹ç‰Œ
        function initPokerCard() {
            const container = document.getElementById('poker-card-container');
            container.innerHTML = '';
            const card = generateRandomPokerCard({ width: 100, height: 140 });
            container.appendChild(card);
        }

        // åˆ‡æ¢æ‰‘å…‹ç‰Œ
        function changePokerCard() {
            const container = document.getElementById('poker-card-container');
            container.innerHTML = '';
            const card = generateRandomPokerCard({ width: 100, height: 140 });
            card.classList.add('poker-card--animated');
            container.appendChild(card);
        }

        // æ‰‘å…‹ç‰Œé¼ æ ‡ç§»åŠ¨äº‹ä»¶å¤„ç†
        function handlePokerMouseMove(event, element) {
            const now = Date.now();
            if (now - lastPokerTime < throttleDelay) {
                return;
            }
            lastPokerTime = now;

            const rect = element.getBoundingClientRect();
            const x = event.clientX - rect.left;
            const y = event.clientY - rect.top;

            createFloatingPokerCard(element, x, y);
        }

        // æ‰‘å…‹ç‰Œè§¦æ‘¸ç§»åŠ¨äº‹ä»¶å¤„ç†
        function handlePokerTouchMove(event, element) {
            
            const now = Date.now();
            if (now - lastPokerTime < throttleDelay) {
                return;
            }
            lastPokerTime = now;

            const touch = event.touches[0];
            const rect = element.getBoundingClientRect();
            const x = touch.clientX - rect.left;
            const y = touch.clientY - rect.top;

            createFloatingPokerCard(element, x, y);
        }

        // åˆ›å»ºæµ®åŠ¨æ‰‘å…‹ç‰Œ
        function createFloatingPokerCard(element, x, y) {
            const floatingCard = generateRandomPokerCard({ width: 40, height: 60 });
            floatingCard.classList.add('floating-card');
            floatingCard.style.left = `${x - 20}px`;
            floatingCard.style.top = `${y - 30}px`;

            element.appendChild(floatingCard);

            setTimeout(() => {
                if (floatingCard.parentNode) {
                    floatingCard.parentNode.removeChild(floatingCard);
                }
            }, 1500);
        }

        // åˆå§‹åŒ–éº»å°†ç‰Œ
        function initMahjongTile() {
            const container = document.getElementById('mahjong-card-container');
            container.innerHTML = '';
            const tile = generateRandomMahjongTile({ width: 80, height: 110 });
            container.appendChild(tile);
        }

        // åˆ‡æ¢éº»å°†ç‰Œ
        function changeMahjongTile() {
            const container = document.getElementById('mahjong-card-container');
            container.innerHTML = '';
            const tile = generateRandomMahjongTile({ width: 80, height: 110 });
            tile.classList.add('mahjong-tile--animated');
            container.appendChild(tile);
        }

        // éº»å°†ç‰Œé¼ æ ‡ç§»åŠ¨äº‹ä»¶å¤„ç†
        function handleMahjongMouseMove(event, element) {
            const now = Date.now();
            if (now - lastMahjongTime < throttleDelay) {
                return;
            }
            lastMahjongTime = now;

            const rect = element.getBoundingClientRect();
            const x = event.clientX - rect.left;
            const y = event.clientY - rect.top;

            createFloatingMahjongTile(element, x, y);
        }

        // éº»å°†ç‰Œè§¦æ‘¸ç§»åŠ¨äº‹ä»¶å¤„ç†
        function handleMahjongTouchMove(event, element) {
            
            const now = Date.now();
            if (now - lastMahjongTime < throttleDelay) {
                return;
            }
            lastMahjongTime = now;

            const touch = event.touches[0];
            const rect = element.getBoundingClientRect();
            const x = touch.clientX - rect.left;
            const y = touch.clientY - rect.top;

            createFloatingMahjongTile(element, x, y);
        }

        // åˆ›å»ºæµ®åŠ¨éº»å°†ç‰Œ
        function createFloatingMahjongTile(element, x, y) {
            const floatingTile = generateRandomMahjongTile({ width: 40, height: 60 });
            floatingTile.classList.add('floating-card');
            floatingTile.style.left = `${x - 20}px`;
            floatingTile.style.top = `${y - 30}px`;

            element.appendChild(floatingTile);

            setTimeout(() => {
                if (floatingTile.parentNode) {
                    floatingTile.parentNode.removeChild(floatingTile);
                }
            }, 1500);
        }

        // åˆå§‹åŒ–UNOç‰Œ
        function initUnoCard() {
            const container = document.getElementById('uno-card-container');
            container.innerHTML = '';
            const card = generateRandomUnoCard({ width: 100, height: 150 });
            container.appendChild(card);
        }

        // åˆ‡æ¢UNOç‰Œ
        function changeUnoCard() {
            const container = document.getElementById('uno-card-container');
            container.innerHTML = '';
            const card = generateRandomUnoCard({ width: 100, height: 150 });
            card.classList.add('uno-card--animated');
            container.appendChild(card);
        }

        // UNOç‰Œé¼ æ ‡ç§»åŠ¨äº‹ä»¶å¤„ç†
        function handleUnoMouseMove(event, element) {
            const now = Date.now();
            if (now - lastUnoTime < throttleDelay) {
                return;
            }
            lastUnoTime = now;

            const rect = element.getBoundingClientRect();
            const x = event.clientX - rect.left;
            const y = event.clientY - rect.top;

            createFloatingUnoCard(element, x, y);
        }

        // UNOç‰Œè§¦æ‘¸ç§»åŠ¨äº‹ä»¶å¤„ç†
        function handleUnoTouchMove(event, element) {
            
            const now = Date.now();
            if (now - lastUnoTime < throttleDelay) {
                return;
            }
            lastUnoTime = now;

            const touch = event.touches[0];
            const rect = element.getBoundingClientRect();
            const x = touch.clientX - rect.left;
            const y = touch.clientY - rect.top;

            createFloatingUnoCard(element, x, y);
        }

        // åˆ›å»ºæµ®åŠ¨UNOç‰Œ
        function createFloatingUnoCard(element, x, y) {
            const floatingCard = generateRandomUnoCard({ width: 40, height: 60 });
            floatingCard.classList.add('floating-card');
            floatingCard.style.left = `${x - 20}px`;
            floatingCard.style.top = `${y - 30}px`;

            element.appendChild(floatingCard);

            setTimeout(() => {
                if (floatingCard.parentNode) {
                    floatingCard.parentNode.removeChild(floatingCard);
                }
            }, 1500);
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–æ‰€æœ‰ç‰Œ
        window.addEventListener('DOMContentLoaded', function() {
            initPokerCard();
            initMahjongTile();
            initUnoCard();
            startCardRain();
        });

        // å…¨å±ç‰Œé›¨åŠŸèƒ½
        function startCardRain() {
            const container = document.getElementById('card-rain-container');
            
            // å®šæœŸç”Ÿæˆç‰Œé›¨
            setInterval(() => {
                createRainCard(container);
            }, 1000); // æ¯1000msç”Ÿæˆä¸€å¼ ç‰Œ
        }

        // åˆ›å»ºå•å¼ ç‰Œé›¨
        function createRainCard(container) {
            // éšæœºé€‰æ‹©ç‰Œçš„ç±»å‹: 0-æ‰‘å…‹, 1-éº»å°†, 2-UNO
            const cardType = Math.floor(Math.random() * 3);
            let card;

            // æ ¹æ®ç±»å‹ç”Ÿæˆå¯¹åº”çš„ç‰Œ
            switch(cardType) {
                case 0:
                    card = generateRandomPokerCard({ width: 40, height: 60 });
                    break;
                case 1:
                    card = generateRandomMahjongTile({ width: 40, height: 60 });
                    break;
                case 2:
                    card = generateRandomUnoCard({ width: 40, height: 60 });
                    break;
            }

            // æ·»åŠ ç‰Œé›¨æ ·å¼ç±»
            card.classList.add('rain-card');

            // éšæœºæ°´å¹³ä½ç½® (0-100%)
            const randomX = Math.random() * 100;
            card.style.left = `${randomX}%`;

            // éšæœºåŠ¨ç”»æŒç»­æ—¶é—´ (3-6ç§’)
            const duration = 3 + Math.random() * 3;
            card.style.animationDuration = `${duration}s`;

            // éšæœºå»¶è¿Ÿ (0-1ç§’)
            const delay = 0;
            card.style.animationDelay = `${delay}s`;

            // æ·»åŠ åˆ°å®¹å™¨
            container.appendChild(card);

            // åŠ¨ç”»ç»“æŸåç§»é™¤å…ƒç´ 
            setTimeout(() => {
                if (card.parentNode) {
                    card.parentNode.removeChild(card);
                }
            }, (duration + delay) * 1000 - 100);
        }
    </script>
    <!-- genAI_main_end -->
</body>
</html>
