<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>star ring</title>
    <style>
      body {
        margin: 0;
        padding: 0;
        background-color: black;
      }

      .frame {
        position: relative;
        width: 100vw;
        height: 100vh;
        /* background-color: #000; */
        /* overflow: hidden; */
        /* perspective: 500vmax; */
        transform-style: preserve-3d;
        transform: rotateY(80deg) rotateX(80deg);
      }

      .star-ring-fragment {
        position: absolute;
        top: calc(50vh - 20px);
        left: calc(50vw - 20px);
        width: 40px;
        height: 40px;
        background-color: #ffffff;
        box-shadow: 0px 0px 16px #91bef0;
        transform-style: preserve-3d;
      }

      .origin-stable {
        position: absolute;
        top: calc(50vh - 180px);
        left: calc(50vw - 180px);
        width: 360px;
        height: 360px;
        display: flex;
        justify-content: center;
        align-items: center;
        transform-style: preserve-3d;
        background-color: #ffffff;
        border-radius: 50%;
        box-shadow: 0px 0px 40px #91bef0;
        transform: rotateX(-80deg) rotateY(-80deg);
      }
    </style>
  </head>
  <body>
    <div class="frame">
      <div class="origin-stable"></div>
    </div>
  </body>
  <script>

    function addKeyframes(edge, isRotateX, rotateXorYDeg, translateZpx, addStyleId){
      const styleDom = document.createElement("style");
      styleDom.type = "text/css";
      let innerHTMLs = ``;
      if (isRotateX) {
        for (let i = 0; i < edge; i++) {
          innerHTMLs += `
            @keyframes star-ring-fragment-rotate-${addStyleId}-${i} {
              0% {
                transform: rotateY(${rotateXorYDeg}deg) rotateX(${(360 / edge) * i}deg) translateZ(${translateZpx}px);
              }
              100% {
                transform: rotateY(${rotateXorYDeg}deg) rotateX(${(360 / edge) * i + 360}deg) translateZ(${translateZpx}px);
              }
            }
          `;
        }
      } else {
        for (let i = 0; i < edge; i++) {
          innerHTMLs += `
            @keyframes star-ring-fragment-rotate-${addStyleId}-${i} {
              0% {
                transform: rotateX(${rotateXorYDeg}deg) rotateY(${(360 / edge) * i}deg) translateZ(${translateZpx}px);
              }
              100% {
                transform: rotateX(${rotateXorYDeg}deg) rotateY(${(360 / edge) * i + 360}deg) translateZ(${translateZpx}px);
              }
            }
          `;
        }
      }
      
      styleDom.innerHTML = innerHTMLs;
      document.head.appendChild(styleDom);
    }

    function addStarRingFragment(edge, isRotateX, rotateXorYDeg, translateZpx, durationSec, addStyleId, size){
      const frame = document.getElementsByClassName("frame")[0];
      for (let i = 0; i < edge; i++) {
        const fragment = document.createElement("div");
        fragment.className = "star-ring-fragment";
        fragment.style.width = `${size}px`;
        fragment.style.height = `${size}px`;
        fragment.style.top = `calc(50vh - ${size / 2}px)`;
        fragment.style.left = `calc(50vw - ${size / 2}px)`;
        if (isRotateX) {
          fragment.style.transform = `rotateY(${rotateXorYDeg}deg) rotateX(${(360 / edge) * i}deg) translateZ(${translateZpx}px)`;
          fragment.style.animation = `star-ring-fragment-rotate-${addStyleId}-${i} ${durationSec}s linear infinite`;
        } else {
          fragment.style.transform = `rotateX(${rotateXorYDeg}deg) rotateY(${(360 / edge) * i}deg) translateZ(${translateZpx}px)`;
          fragment.style.animation = `star-ring-fragment-rotate-${addStyleId}-${i} ${durationSec}s linear infinite`;
        }
        frame.appendChild(fragment);
      }
    }

    function createStarRing(edge, isRotateX, rotateXorYDeg, translateZpx, durationSec, addStyleId, size) {
      addKeyframes(edge, isRotateX, rotateXorYDeg, translateZpx, addStyleId);
      addStarRingFragment(edge, isRotateX, rotateXorYDeg, translateZpx, durationSec, addStyleId, size);
    }

    function init(){
      const edge = 72;
      const durationSec = 120;
      createStarRing(36, false, 20, 300, durationSec, "ring1", 40);
      createStarRing(36, false, 80, 300, durationSec, "ring2", 40);
      createStarRing(36, false, 140, 300, durationSec, "ring3", 40);
      createStarRing(edge, false, 0, 400, durationSec, "ring11", 20);
      createStarRing(edge, false, 36, 400, durationSec, "ring22", 20);
      createStarRing(edge, false, 72, 400, durationSec, "ring33", 20);
      createStarRing(edge, false, 108, 400, durationSec, "ring44", 20);
      createStarRing(edge, false, 144, 400, durationSec, "ring55", 20);
      // createStarRing(edge, true, 10, 300, durationSec, "ring2", 40);
    }
    init();
  </script>
</html>
