<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>star ring</title>
    <style>
      body {
        margin: 0;
        padding: 0;
        background-color: black;
      }

      .galaxy {
        position: relative;
        width: 100vw;
        height: 100vh;
        /* background-color: #000; */
        /* overflow: hidden; */
        /* perspective: 500vmax; */
        transform-style: preserve-3d;
        transform: rotateY(80deg) rotateX(80deg);
      }

      .star-ring-fragment {
        position: absolute;
        top: calc(50vh - 20px);
        left: calc(50vw - 20px);
        width: 40px;
        height: 40px;
        background-color: #ffffff;
        box-shadow: 0px 0px 16px #91bef0;
        transform-style: preserve-3d;
        will-change: transform;
      }

      .origin-stable {
        position: absolute;
        top: calc(50vh - 180px);
        left: calc(50vw - 180px);
        width: 360px;
        height: 360px;
        display: flex;
        justify-content: center;
        align-items: center;
        transform-style: preserve-3d;
        background-color: #ffffff;
        border-radius: 50%;
        box-shadow: 0px 0px 40px #91bef0;
        transform: rotateX(-80deg) rotateY(-80deg);
      }
    </style>
  </head>
  <body>
    <div class="galaxy">
      <div class="origin-stable" onclick="upload()"></div>
    </div>
    <select name="patterns" id="patterns" style="position: absolute; top: 20px; right: 20px; z-index: 99999;">
    </select>
  </body>
  <script>

    function addKeyframes(KFconfig){
      const {edge, isRotateX, rotateXorYDeg, translateZpx, addStyleId} = KFconfig;
      const styleDom = document.createElement("style");
      styleDom.type = "text/css";
      let innerHTMLs = ``;
      if (isRotateX) {
        for (let i = 0; i < edge; i++) {
          innerHTMLs += `
            @keyframes star-ring-fragment-rotate-${addStyleId}-${i} {
              0% {
                transform: rotateY(${rotateXorYDeg}deg) rotateX(${(360 / edge) * i}deg) translateZ(${translateZpx}px);
              }
              100% {
                transform: rotateY(${rotateXorYDeg}deg) rotateX(${(360 / edge) * i + 360}deg) translateZ(${translateZpx}px);
              }
            }
          `;
        }
      } else {
        for (let i = 0; i < edge; i++) {
          innerHTMLs += `
            @keyframes star-ring-fragment-rotate-${addStyleId}-${i} {
              0% {
                transform: rotateX(${rotateXorYDeg}deg) rotateY(${(360 / edge) * i}deg) translateZ(${translateZpx}px);
              }
              100% {
                transform: rotateX(${rotateXorYDeg}deg) rotateY(${(360 / edge) * i + 360}deg) translateZ(${translateZpx}px);
              }
            }
          `;
        }
      }
      
      styleDom.innerHTML = innerHTMLs;
      document.head.appendChild(styleDom);
    }

    function addStarRingFragment(SRFconfig){
      const {edge, isRotateX, rotateXorYDeg, translateZpx, durationSec, addStyleId, size} = SRFconfig;
      const galaxy = document.getElementsByClassName("galaxy")[0];
      for (let i = 0; i < edge; i++) {
        const fragment = document.createElement("div");
        fragment.className = "star-ring-fragment";
        fragment.style.width = `${size}px`;
        fragment.style.height = `${size}px`;
        fragment.style.top = `calc(50vh - ${size / 2}px)`;
        fragment.style.left = `calc(50vw - ${size / 2}px)`;
        if (isRotateX) {
          fragment.style.transform = `rotateY(${rotateXorYDeg}deg) rotateX(${(360 / edge) * i}deg) translateZ(${translateZpx}px)`;
          fragment.style.animation = `star-ring-fragment-rotate-${addStyleId}-${i} ${durationSec}s linear infinite`;
        } else {
          fragment.style.transform = `rotateX(${rotateXorYDeg}deg) rotateY(${(360 / edge) * i}deg) translateZ(${translateZpx}px)`;
          fragment.style.animation = `star-ring-fragment-rotate-${addStyleId}-${i} ${durationSec}s linear infinite`;
        }
        galaxy.appendChild(fragment);
      }
    }

    function createStarRing(config) {
      addKeyframes(config);
      addStarRingFragment(config);
    }

    function createGalaxy(pattern) {
      const {ringConfigs, galaxyConfig = {rotateX:80,rotateY:80}} = pattern;
      console.log(galaxyConfig);
      const galaxy = document.getElementsByClassName("galaxy")[0];
      // 注意这里先Y后X
      galaxy.style.transform = `rotateY(${galaxyConfig.rotateY}deg) rotateX(${galaxyConfig.rotateX}deg)`;
      const originStable = document.getElementsByClassName("origin-stable")[0];
      // against的话需要反一下，先负的X再负的Y
      originStable.style.transform = `rotateX(${-galaxyConfig.rotateX}deg) rotateY(${-galaxyConfig.rotateY}deg)`;

      ringConfigs.forEach((config) => {
        createStarRing(config);
      });
    }

    document.getElementById("patterns").addEventListener("change", (e) => {
      // remove existing star ring fragments
      const existingFragments = document.getElementsByClassName("star-ring-fragment");
      for (let i = existingFragments.length - 1; i >= 0; i--) {
        existingFragments[i].remove();
      }
      const selectedPatternIndex = e.target.value;
      const selectedPattern = patterns[selectedPatternIndex];
      createGalaxy(selectedPattern);
    });

    const patterns = [];
    function init(){
      const createPattern_SIMPLE = () => {
        const patternX = {
          ringConfigs: []
        };
        for (let i = 0; i < 1; i++) {
          patternX.ringConfigs.push({
            edge: 36,
            isRotateX: false,
            rotateXorYDeg: i * 45,
            translateZpx: 300,
            durationSec: 120,
            addStyleId: `ring-simple-1-${i}`,
            size: 40
          });
        }
        for (let i = 0; i < 1; i++) {
          patternX.ringConfigs.push({
            edge: 36,
            isRotateX: true,
            rotateXorYDeg: i * 45 + 90,
            translateZpx: 300,
            durationSec: 120,
            addStyleId: `ring-simple-2-${i}`,
            size: 40
          });
        }
        return patternX;
      };
      const createPattern_COMPLEX1 = () => {
        const patternX = {
          ringConfigs: []
        };
        for (let i = 0; i < 3; i++) {
          patternX.ringConfigs.push({
            edge: 36,
            isRotateX: false,
            rotateXorYDeg: i * 60 + 20,
            translateZpx: 300,
            durationSec: 120,
            addStyleId: `ring-complex1-1-${i}`,
            size: 40
          });
        }
        for (let i = 0; i < 5; i++) {
          patternX.ringConfigs.push({
            edge: 72,
            isRotateX: false,
            rotateXorYDeg: i * 36,
            translateZpx: 400,
            durationSec: 120,
            addStyleId: `ring-complex1-2-${i}`,
            size: 20
          });
        }
        return patternX;
      };
      const createPattern_COMPLEX2 = () => {
        const patternX = {
          ringConfigs: []
        };
        for (let i = 0; i < 4; i++) {
          patternX.ringConfigs.push({
            edge: 36,
            isRotateX: false,
            rotateXorYDeg: i * 45 + 20,
            translateZpx: 300,
            durationSec: 120,
            addStyleId: `ring-complex2-1-${i}`,
            size: 40
          });
        }
        for (let i = 0; i < 4; i++) {
          patternX.ringConfigs.push({
            edge: 54,
            isRotateX: false,
            rotateXorYDeg: i * 45,
            translateZpx: 400,
            durationSec: 120,
            addStyleId: `ring-complex2-2-${i}`,
            size: 30
          });
        }
        return patternX;
      };
      const createPattern_SAME_HEART = () => {
        const patternX = {
          ringConfigs: [],
          galaxyConfig: {
            rotateX: 70,
            rotateY: 70
          }
        };
        for (let i = 0; i < 4; i++) {
          patternX.ringConfigs.push({
            edge: 10 * i * i + 18,
            isRotateX: false,
            rotateXorYDeg:  90,
            translateZpx: 200 + i * 90,
            durationSec: 30 + i * i * 30,
            addStyleId: `ring-sameheart-1-${i}`,
            size: 40 - i * 10
          });
        }
        return patternX;
      };
      // 螺旋星系 - 多层螺旋交错
      const createPattern_SPIRAL_GALAXY = () => {
        const patternX = {
          ringConfigs: [],
          galaxyConfig: {
            rotateX: 75,
            rotateY: 60
          }
        };
        // 创建多层螺旋效果
        for (let i = 0; i < 6; i++) {
          patternX.ringConfigs.push({
            edge: 24 + i * 6,
            isRotateX: false,
            rotateXorYDeg: 15 * i,
            translateZpx: 200 + i * 60,
            durationSec: 60 + i * 20,
            addStyleId: `ring-spiral-${i}`,
            size: 35 - i * 3
          });
        }
        return patternX;
      };
      // 螺旋星系 - 多层螺旋交错 - 扩展
      const createPattern_SPIRAL_GALAXY_EXPAND = () => {
        const patternX = {
          ringConfigs: [],
          galaxyConfig: {
            rotateX: 75,
            rotateY: 60
          }
        };
        // 创建多层螺旋效果
        for (let i = 0; i < 22; i++) {
          patternX.ringConfigs.push({
            edge: 24 + i * 6,
            isRotateX: false,
            rotateXorYDeg: 15 * i,
            translateZpx: 200 + i * 60,
            durationSec: 60 + i * 20,
            addStyleId: `ring-spiral-expand-${i}`,
            size: 35 - i * 3
          });
        }
        return patternX;
      };
      // 螺旋星系 - 多层螺旋交错 - 扩展 - 2
      const createPattern_SPIRAL_GALAXY_EXPAND_2 = () => {
        const patternX = {
          ringConfigs: [],
          galaxyConfig: {
            rotateX: 75,
            rotateY: 60
          }
        };
        // 创建多层螺旋效果
        for (let i = 0; i < 24; i++) {
          patternX.ringConfigs.push({
            edge: 24 + i * 6,
            isRotateX: false,
            rotateXorYDeg: 8 * i,
            translateZpx: 200 + i * 60,
            durationSec: 60 + i * 20,
            addStyleId: `ring-spiral-expand-2-${i}`,
            size: 37 - i * 1.5
          });
        }
        return patternX;
      };
      // 螺旋星系 - 多层螺旋交错 - 扩展 - 3
      const createPattern_SPIRAL_GALAXY_EXPAND_3 = () => {
        const patternX = {
          ringConfigs: [],
          galaxyConfig: {
            rotateX: 75,
            rotateY: 60
          }
        };
        // 创建多层螺旋效果
        for (let i = 0; i < 36; i++) {
          patternX.ringConfigs.push({
            edge: 24 + i * 6,
            isRotateX: false,
            rotateXorYDeg: 8 * i,
            translateZpx: 200 + i * 40,
            durationSec: 60 + i * 20,
            addStyleId: `ring-spiral-expand-3-${i}`,
            size: 19 - i * 0.5
          });
        }
        return patternX;
      };
      // 蚰蜒
      const createPattern_WORM_GALAXY = () => {
        const patternX = {
          ringConfigs: [],
          galaxyConfig: {
            rotateX: 75,
            rotateY: 60
          }
        };
        // 创建多层螺旋效果
        for (let i = 0; i < 36; i++) {
          patternX.ringConfigs.push({
            edge: 24 + Math.pow(i, 1) * 6,
            isRotateX: false,
            rotateXorYDeg: 90,
            translateZpx: 200 + i * 40,
            durationSec: 60 + i * 20,
            addStyleId: `ring-worm-${i}`,
            size: 5 - i * 0.1
          });
        }
        return patternX;
      };
      // 恒星
      const createPattern_STAR_GALAXY = () => {
        const patternX = {
          ringConfigs: [],
          galaxyConfig: {
            rotateX: 75,
            rotateY: 60
          }
        };
        // 创建多层螺旋效果
        for (let i = 0; i < 12; i++) {
          patternX.ringConfigs.push({
            edge: 24 + i * i * 6,
            isRotateX: false,
            rotateXorYDeg: 90,
            translateZpx: 300 + i * 20,
            durationSec: 60 + i * 20,
            addStyleId: `ring-star-${i}`,
            size: 2 - i * 0.1
          });
        }
        return patternX;
      };
      
      // 双子星 - 两组对称旋转的星环
      const createPattern_TWIN_STARS = () => {
        const patternX = {
          ringConfigs: [],
          galaxyConfig: {
            rotateX: 80,
            rotateY: 0
          }
        };
        // 第一组 - X轴旋转
        for (let i = 0; i < 3; i++) {
          patternX.ringConfigs.push({
            edge: 30,
            isRotateX: true,
            rotateXorYDeg: i * 60,
            translateZpx: 280,
            durationSec: 90,
            addStyleId: `ring-twin-x-${i}`,
            size: 35
          });
        }
        // 第二组 - Y轴旋转
        for (let i = 0; i < 3; i++) {
          patternX.ringConfigs.push({
            edge: 30,
            isRotateX: false,
            rotateXorYDeg: i * 60,
            translateZpx: 280,
            durationSec: 90,
            addStyleId: `ring-twin-y-${i}`,
            size: 35
          });
        }
        return patternX;
      };
      
      // 花瓣星云 - 像花瓣一样展开
      const createPattern_PETAL_NEBULA = () => {
        const patternX = {
          ringConfigs: [],
          galaxyConfig: {
            rotateX: 80,
            rotateY: 80
          }
        };
        // 创建16片"花瓣"
        for (let i = 0; i < 16; i++) {
          patternX.ringConfigs.push({
            edge: 18,
            isRotateX: false,
            rotateXorYDeg: i * 22.5,
            translateZpx: 350,
            durationSec: 150,
            addStyleId: `ring-petal-${i}`,
            size: 45
          });
        }
        return patternX;
      };
      
      // 时空隧道 - 多层同心圆递进
      const createPattern_TIME_TUNNEL = () => {
        const patternX = {
          ringConfigs: [],
          galaxyConfig: {
            rotateX: 0,
            rotateY: 50
          }
        };
        // 创建隧道效果
        for (let i = 2; i < 16; i++) {
          patternX.ringConfigs.push({
            edge: 48,
            isRotateX: false,
            rotateXorYDeg: 90,
            translateZpx: 150 + i * 50,
            durationSec: 20 + i * 20,
            addStyleId: `ring-tunnel-${i}`,
            size: 25 + i * 2
          });
        }
        return patternX;
      };
      
      // 混沌之球 - 随机角度多环交错
      const createPattern_CHAOS_SPHERE = () => {
        const patternX = {
          ringConfigs: [],
          galaxyConfig: {
            rotateX: 65,
            rotateY: 65
          }
        };
        const angles = [15, 37, 58, 82, 103, 127, 145, 168, 180, 202, 223, 247, 268, 292, 313, 337];
        for (let i = 0; i < 16; i++) {
          patternX.ringConfigs.push({
            edge: 24 + (i % 3) * 6,
            isRotateX: i % 2 === 0,
            rotateXorYDeg: angles[i],
            translateZpx: 250 + (i % 4) * 40,
            durationSec: 80 + i * 15,
            addStyleId: `ring-chaos-${i}`,
            size: 30 + (i % 4) * 5
          });
        }
        return patternX;
      };
      
      // 呼吸星云 - 大小渐变,速度递减,像呼吸一样
      const createPattern_BREATHING_NEBULA = () => {
        const patternX = {
          ringConfigs: [],
          galaxyConfig: {
            rotateX: 70,
            rotateY: 70
          }
        };
        // 从小到大,从快到慢
        for (let i = 0; i < 6; i++) {
          patternX.ringConfigs.push({
            edge: 36,
            isRotateX: false,
            rotateXorYDeg: i * 30,
            translateZpx: 300,
            durationSec: 20 + i * 40, // 速度递减: 20s -> 220s
            addStyleId: `ring-breathing-${i}`,
            size: 15 + i * 15 // 大小递增: 15px -> 90px
          });
        }
        return patternX;
      };
      
      // 脉冲波 - 极速小粒子与超慢大粒子对比
      const createPattern_PULSE_WAVE = () => {
        const patternX = {
          ringConfigs: [],
          galaxyConfig: {
            rotateX: 80,
            rotateY: 60
          }
        };
        // 内层极速小粒子
        for (let i = 0; i < 3; i++) {
          patternX.ringConfigs.push({
            edge: 48,
            isRotateX: false,
            rotateXorYDeg: i * 60,
            translateZpx: 200,
            durationSec: 10, // 极速
            addStyleId: `ring-pulse-fast-${i}`,
            size: 8 // 极小
          });
        }
        // 中层中速中粒子
        for (let i = 0; i < 3; i++) {
          patternX.ringConfigs.push({
            edge: 36,
            isRotateX: false,
            rotateXorYDeg: i * 60 + 30,
            translateZpx: 300,
            durationSec: 60, // 中速
            addStyleId: `ring-pulse-mid-${i}`,
            size: 30 // 中等
          });
        }
        // 外层超慢大粒子
        for (let i = 0; i < 3; i++) {
          patternX.ringConfigs.push({
            edge: 24,
            isRotateX: false,
            rotateXorYDeg: i * 60,
            translateZpx: 400,
            durationSec: 240, // 超慢
            addStyleId: `ring-pulse-slow-${i}`,
            size: 60 // 超大
          });
        }
        return patternX;
      };
      
      // 脉冲波 - 极速小粒子与超慢大粒子对比 - 扩展
      const createPattern_PULSE_WAVE_EXPAND = () => {
        const patternX = {
          ringConfigs: [],
          galaxyConfig: {
            rotateX: 80,
            rotateY: 60
          }
        };
        // 内层极速小粒子
        for (let i = 0; i < 3; i++) {
          patternX.ringConfigs.push({
            edge: 48,
            isRotateX: false,
            rotateXorYDeg: i * 60,
            translateZpx: 200,
            durationSec: 10, // 极速
            addStyleId: `ring-pulse-fast-${i}`,
            size: 8 // 极小
          });
        }
        // 中层中速中粒子
        for (let i = 0; i < 3; i++) {
          patternX.ringConfigs.push({
            edge: 36,
            isRotateX: false,
            rotateXorYDeg: i * 60 + 30,
            translateZpx: 300,
            durationSec: 60, // 中速
            addStyleId: `ring-pulse-mid-${i}`,
            size: 30 // 中等
          });
        }
        // 外层超慢大粒子
        for (let i = 0; i < 3; i++) {
          patternX.ringConfigs.push({
            edge: 24,
            isRotateX: false,
            rotateXorYDeg: i * 60,
            translateZpx: 400,
            durationSec: 240, // 超慢
            addStyleId: `ring-pulse-slow-${i}`,
            size: 60 // 超大
          });
        }
        // 外层超慢大粒子 - 扩展
        for (let i = 0; i < 3; i++) {
          patternX.ringConfigs.push({
            edge: 18,
            isRotateX: false,
            rotateXorYDeg: i * 60,
            translateZpx: 600,
            durationSec: 480, // 超慢
            addStyleId: `ring-pulse-slow-expand-${i}`,
            size: 120 // 超大
          });
        }
        return patternX;
      };
      
      // 量子涟漪 - 大小交替,速度波动
      const createPattern_QUANTUM_RIPPLE = () => {
        const patternX = {
          ringConfigs: [],
          galaxyConfig: {
            rotateX: 85,
            rotateY: 50
          }
        };
        const sizes = [50, 15, 45, 20, 40, 25, 35, 30]; // 大小交替
        const speeds = [180, 30, 150, 45, 120, 60, 90, 75]; // 速度波动
        for (let i = 0; i < 8; i++) {
          patternX.ringConfigs.push({
            edge: 30,
            isRotateX: false,
            rotateXorYDeg: i * 22.5,
            translateZpx: 320,
            durationSec: speeds[i],
            addStyleId: `ring-quantum-${i}`,
            size: sizes[i]
          });
        }
        return patternX;
      };
      
      // 时间沙漏 - 两端大中间小,两端慢中间快
      const createPattern_TIME_HOURGLASS = () => {
        const patternX = {
          ringConfigs: [],
          galaxyConfig: {
            rotateX: 0,
            rotateY: 75
          }
        };
        // 模拟沙漏形状和时间流速
        const layers = 7;
        for (let i = 0; i < layers; i++) {
          const progress = i / (layers - 1); // 0 到 1
          const middle = 0.5;
          const distance = Math.abs(progress - middle); // 距离中心的距离
          // 中间小两端大
          const size = 10 + distance * 80; // 10px -> 50px -> 10px
          // 中间快两端慢
          const speed = 200 - distance * 180; // 200s -> 20s -> 200s
          
          patternX.ringConfigs.push({
            edge: 36,
            isRotateX: true,
            rotateXorYDeg: i * 25.7,
            translateZpx: 280,
            durationSec: speed,
            addStyleId: `ring-hourglass-${i}`,
            size: size
          });
        }
        return patternX;
      };
      
      // 微观宇宙 - 大量微小粒子高速运动
      const createPattern_MICRO_UNIVERSE = () => {
        const patternX = {
          ringConfigs: [],
          galaxyConfig: {
            rotateX: 60,
            rotateY: 80
          }
        };
        // 创建多层微小粒子
        for (let i = 0; i < 20; i++) {
          patternX.ringConfigs.push({
            edge: 60 + i * 12, // 粒子数量递增
            isRotateX: i % 2 === 0,
            rotateXorYDeg: i * 18,
            translateZpx: 200 + i * 30,
            durationSec: 150 + i * 50, // 快速旋转
            addStyleId: `ring-micro-${i}`,
            size: Math.floor(Math.random() * 2) + 2 // 微小粒子: 5px -> 15px
          });
        }
        return patternX;
      };
      
      // 巨石阵 - 少量巨大粒子缓慢移动
      const createPattern_STONEHENGE = () => {
        const patternX = {
          ringConfigs: [],
          galaxyConfig: {
            rotateX: 70,
            rotateY: 55
          }
        };
        // 创建少量巨大的"石块"
        for (let i = 0; i < 4; i++) {
          patternX.ringConfigs.push({
            edge: 8 + i * 2, // 粒子数量少
            isRotateX: false,
            rotateXorYDeg: i * 45,
            translateZpx: 250 + i * 60,
            durationSec: 300 + i * 100, // 极慢: 300s -> 600s
            addStyleId: `ring-stone-${i}`,
            size: 70 + i * 10 // 巨大: 70px -> 100px
          });
        }
        return patternX;
      };
      
      // 巨石阵 - 少量巨大粒子缓慢移动 - 扩展
      const createPattern_STONEHENGE_EXPAND = () => {
        const patternX = {
          ringConfigs: [],
          galaxyConfig: {
            rotateX: 70,
            rotateY: 55
          }
        };
        // 创建少量巨大的"石块"
        for (let i = 0; i < 8; i++) {
          patternX.ringConfigs.push({
            edge: 8 + i * 2, // 粒子数量少
            isRotateX: false,
            rotateXorYDeg: i * 45,
            translateZpx: 250 + i * 60,
            durationSec: 300 + i * 100, // 极慢: 300s -> 600s
            addStyleId: `ring-stone-${i}`,
            size: 70 + i * 10 // 巨大: 70px -> 100px
          });
        }
        return patternX;
      };
      
      // 心跳节奏 - 模拟心跳的快慢变化
      const createPattern_HEARTBEAT = () => {
        const patternX = {
          ringConfigs: [],
          galaxyConfig: {
            rotateX: 80,
            rotateY: 70
          }
        };
        // 模拟心跳节奏: 快-快-慢-快-快-慢
        const heartbeatRhythm = [25, 30, 120, 25, 30, 120, 25, 30];
        const heartbeatSizes = [35, 40, 50, 35, 40, 50, 35, 40];
        for (let i = 0; i < 8; i++) {
          patternX.ringConfigs.push({
            edge: 30,
            isRotateX: false,
            rotateXorYDeg: i * 45,
            translateZpx: 300,
            durationSec: heartbeatRhythm[i],
            addStyleId: `ring-heartbeat-${i}`,
            size: heartbeatSizes[i]
          });
        }
        return patternX;
      };
      
      // 粒子爆发 - 从中心向外,速度递增,大小递减
      const createPattern_PARTICLE_BURST = () => {
        const patternX = {
          ringConfigs: [],
          galaxyConfig: {
            rotateX: 75,
            rotateY: 65
          }
        };
        for (let i = 0; i < 16; i++) {
          patternX.ringConfigs.push({
            edge: 24 + i * 6,
            isRotateX: i % 3 === 0,
            rotateXorYDeg: i * 22.5,
            translateZpx: 180 + i * 35,
            durationSec: 120 - i * 6, // 速度递增: 120s -> 36s
            addStyleId: `ring-burst-${i}`,
            size: 55 - i * 2.5 // 大小递减: 55px -> 15px
          });
        }
        return patternX;
      };
      /** genAI_main_start */
      const patternNames = [
        "行星环 Ring",
        "简约双环 Simple",
        "复杂星系1 Complex Galaxy I",
        "复杂星系2 Complex Galaxy II",
        "螺旋星系 Spiral Galaxy",
        "螺旋星系 - 扩展 Spiral Galaxy - Expand",
        "螺旋星系 - 扩展 - 2 Spiral Galaxy - Expand - 2",
        "螺旋星系 - 扩展 - 3 Spiral Galaxy - Expand - 3",
        "蚰蜒(虫恐慎点) Worm",
        "恒星 Star",
        "双子星 Twin Stars",
        "花瓣星云 Petal Nebula",
        "时空隧道 Time Tunnel",
        "混沌之球 Chaos Sphere",
        "呼吸星云 Breathing Nebula",
        "脉冲波 Pulse Wave",
        "脉冲波 - 扩展 Pulse Wave - Expand",
        "量子涟漪 Quantum Ripple",
        "西瓜 Time Hourglass",
        "微观宇宙 Micro Universe",
        "巨石阵 Stonehenge",
        "巨石阵 - 扩展 Stonehenge - Expand",
        "心跳节奏 Heartbeat",
        "粒子爆发 Particle Burst"
      ];
      /** genAI_main_end */
      patterns.push(createPattern_SAME_HEART());
      patterns.push(createPattern_SIMPLE());
      patterns.push(createPattern_COMPLEX1());
      patterns.push(createPattern_COMPLEX2());
      patterns.push(createPattern_SPIRAL_GALAXY());
      patterns.push(createPattern_SPIRAL_GALAXY_EXPAND());
      patterns.push(createPattern_SPIRAL_GALAXY_EXPAND_2());
      patterns.push(createPattern_SPIRAL_GALAXY_EXPAND_3());
      patterns.push(createPattern_WORM_GALAXY());
      patterns.push(createPattern_STAR_GALAXY());
      patterns.push(createPattern_TWIN_STARS());
      patterns.push(createPattern_PETAL_NEBULA());
      patterns.push(createPattern_TIME_TUNNEL());
      patterns.push(createPattern_CHAOS_SPHERE());
      patterns.push(createPattern_BREATHING_NEBULA());
      patterns.push(createPattern_PULSE_WAVE());
      patterns.push(createPattern_PULSE_WAVE_EXPAND());
      patterns.push(createPattern_QUANTUM_RIPPLE());
      patterns.push(createPattern_TIME_HOURGLASS());
      patterns.push(createPattern_MICRO_UNIVERSE());
      patterns.push(createPattern_STONEHENGE());
      patterns.push(createPattern_STONEHENGE_EXPAND());
      patterns.push(createPattern_HEARTBEAT());
      patterns.push(createPattern_PARTICLE_BURST());
      const selectDom = document.getElementById("patterns");
      patterns.forEach((pattern, index) => {
        const optionDom = document.createElement("option");
        optionDom.value = index;
        /** genAI_main_start */
        optionDom.innerText = patternNames[index];
        /** genAI_main_end */
        selectDom.appendChild(optionDom);
        if (index === 0) {
          // initialize with the first pattern
          createGalaxy(pattern);
        }
      });
    }
    init();

    function upload() {
      const input = document.createElement("input");
      input.type = "file";
      input.accept = "image/*";
      input.onchange = (event) => {
        const file = event.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = (e) => {
            const imgsrc = e.target.result;
            const fragments =
              document.getElementsByClassName("star-ring-fragment");
            for (let i = 0; i < fragments.length; i++) {
              fragments[i].style.backgroundImage = `url(${imgsrc})`;
              fragments[i].style.backgroundSize = "cover";
            }
          };
          reader.readAsDataURL(file);
        }
      };
      input.click();
    }
  </script>
</html>